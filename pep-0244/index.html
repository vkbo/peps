
<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PEP 244 – The &lt;code class=&#34;docutils literal notranslate&#34;&gt;&lt;span class=&#34;pre&#34;&gt;directive&lt;/span&gt;&lt;/code&gt; statement | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png"/>
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/mq.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <meta name="description" content="Python Enhancement Proposals (PEPs)"/>
</head>
<body>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 244 – The <code class="docutils literal notranslate"><span class="pre">directive</span></code> statement</li>
            </ul>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 244 – The <code class="docutils literal notranslate"><span class="pre">directive</span></code> statement</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">PEP</dt>
<dd class="field-odd">244</dd>
<dt class="field-even">Title</dt>
<dd class="field-even">The <code class="docutils literal notranslate"><span class="pre">directive</span></code> statement</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd">martin&#32;&#97;t&#32;v.loewis.de (Martin von Löwis)</dd>
<dt class="field-even">Status</dt>
<dd class="field-even">Rejected</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd">Standards Track</dd>
<dt class="field-even">Created</dt>
<dd class="field-even">20-Mar-2001</dd>
<dt class="field-odd">Python-Version</dt>
<dd class="field-odd">2.1</dd>
<dt class="field-even">Post-History</dt>
<dd class="field-even"><p></p></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<h2>Contents</h2>
<ul class="simple">
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#semantics">Semantics</a></li>
<li><a class="reference internal" href="#specific-directives-transitional">Specific Directives: transitional</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#unresolved-problems-directive-as-the-first-identifier">Unresolved Problems:  directive as the first identifier</a></li>
<li><a class="reference internal" href="#questions-and-answers">Questions and Answers</a></li>
<li><a class="reference internal" href="#references-and-footnotes">References and Footnotes</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#motivation">Motivation</a></h2>
<p>From time to time, Python makes an incompatible change to the
advertised semantics of core language constructs, or changes their
accidental (implementation-dependent) behavior in some way.  While
this is never done capriciously, and is always done with the aim
of improving the language over the long term, over the short term
it’s contentious and disrupting.</p>
<p><a class="reference external" href="../pep-0001">PEP 1</a>, Guidelines for Language Evolution <a class="footnote-reference brackets" href="#id8" id="id1">1</a> suggests ways to ease
the pain, and this PEP introduces some machinery in support of
that.</p>
<p><a class="reference external" href="../pep-0002">PEP 2</a>, Statically Nested Scopes <a class="footnote-reference brackets" href="#id9" id="id2">2</a> is the first application, and
will be used as an example here.</p>
<p>When a new, potentially incompatible language feature is added,
some modules and libraries may chose to use it, while others may
not.  This specification introduces a syntax where a module author
can denote whether a certain language feature is used in the
module or not.</p>
<p>In discussion of this PEP, readers commented that there are two
kinds of “settable” language features:</p>
<ul class="simple">
<li>those that are designed to eventually become the only option, at
which time specifying use of them is not necessary anymore.  The
features for which the syntax of the “Back to the <code class="docutils literal notranslate"><span class="pre">__future__</span></code>”
<a class="reference external" href="../pep-0236">PEP 236</a>, Back to the <code class="docutils literal notranslate"><span class="pre">__future__</span></code> <a class="footnote-reference brackets" href="#id10" id="id3">3</a> was proposed fall into this
category.  This PEP supports declaring such features, and
supports phasing out the “old” meaning of constructs whose
semantics has changed under the new feature.  However, it
defines no policy as to what features must be phased out
eventually.</li>
<li>those which are designed to stay optional forever, e.g. if they
change some default setting in the interpreter.  An example for
such settings might be the request to always emit line-number
instructions for a certain module; no specific flags of that
kind are proposed in this specification.</li>
</ul>
<p>Since a primary goal of this PEP is to support new language
constructs without immediately breaking old libraries, special
care was taken not to break old libraries by introducing the new
syntax.</p>
</section>
<section id="syntax">
<h2><a class="toc-backref" href="#syntax">Syntax</a></h2>
<p>A directive_statement is a statement of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>directive_statement: &#39;directive&#39; ``NAME`` [atom] [&#39;;&#39;] NEWLINE
</pre></div>
</div>
<p>The name in the directive indicates the kind of the directive; it
defines whether the optional atom can be present, and whether
there are further syntactical or semantical restrictions to the
atom.  In addition, depending on the name of the directive,
certain additional syntactical or semantical restrictions may be
placed on the directive (e.g. placement of the directive in the
module may be restricted to the top of the module).</p>
<p>In the directive_statement, <code class="docutils literal notranslate"><span class="pre">directive</span></code> is a new
keyword. According to <a class="footnote-reference brackets" href="#id8" id="id4">1</a>, this keyword is initially considered as
a keyword only when used in a directive statement, see “Backwards
Compatibility” below.</p>
</section>
<section id="semantics">
<h2><a class="toc-backref" href="#semantics">Semantics</a></h2>
<p>A directive statement instructs the Python interpreter to process
a source file in a different way; the specific details of that
processing depend on the directive name.  The optional atom is
typically interpreted when the source code is processed; details
of that interpretation depend on the directive.</p>
</section>
<section id="specific-directives-transitional">
<h2><a class="toc-backref" href="#specific-directives-transitional">Specific Directives: transitional</a></h2>
<p>If a syntactical or semantical change is added to Python which is
incompatible, <a class="footnote-reference brackets" href="#id8" id="id5">1</a> mandates a transitional evolution of the
language, where the new feature is initially available alongside
with the old one.  Such a transition is possible by means of the
transitional directive.</p>
<p>In a transitional directive, the <code class="docutils literal notranslate"><span class="pre">NAME</span></code> is ‘transitional’. The atom
MUST be present, and it MUST be a <code class="docutils literal notranslate"><span class="pre">NAME</span></code>.  The possible values for
that name are defined when the language change is defined.  One
example for such a directive is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">directive</span> <span class="n">transitional</span> <span class="n">nested_scopes</span>
</pre></div>
</div>
<p>The transitional directive MUST occur at before any other
statement in a module, except for the documentation string
(i.e. it may appear as the second statement of a module only if
the first statement is a <code class="docutils literal notranslate"><span class="pre">STRING+</span></code>).</p>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#backwards-compatibility">Backwards Compatibility</a></h2>
<p>Introducing <code class="docutils literal notranslate"><span class="pre">directive</span></code> as a new keyword might cause
incompatibilities with existing code.  Following the guideline in
<a class="footnote-reference brackets" href="#id8" id="id6">1</a>, in the initial implementation of this specification,
directive is a new keyword only if it was used in a valid
directive_statement (i.e. if it appeared as the first non-string
token in a module).</p>
</section>
<section id="unresolved-problems-directive-as-the-first-identifier">
<h2><a class="toc-backref" href="#unresolved-problems-directive-as-the-first-identifier">Unresolved Problems:  directive as the first identifier</a></h2>
<p>Using directive in a module as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">directive</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>(i.e. the name directive appears as the first thing in a module)
will treat it as keyword, not as identifier. It would be possible
to classify it as a <code class="docutils literal notranslate"><span class="pre">NAME</span></code> with an additional look-ahead token, but
such look-ahead is not available in the Python tokenizer.</p>
</section>
<section id="questions-and-answers">
<h2><a class="toc-backref" href="#questions-and-answers">Questions and Answers</a></h2>
<p><strong>Q:</strong> It looks like this PEP was written to allow definition of source
code character sets.  Is that true?</p>
<p><strong>A:</strong> No.  Even though the directive facility can be extended to
allow source code encodings, no specific directive is proposed.</p>
<p><strong>Q:</strong> Then why was this PEP written at all?</p>
<p><strong>A:</strong> It acts as a counter-proposal to <a class="footnote-reference brackets" href="#id10" id="id7">3</a>, which proposes to
overload the import statement with a new meaning.  This PEP
allows to solve the problem in a more general way.</p>
<p><strong>Q:</strong> But isn’t mixing source encodings and language changes like
mixing apples and oranges?</p>
<p><strong>A:</strong> Perhaps.  To address the difference, the predefined
“transitional” directive has been defined.</p>
</section>
<section id="references-and-footnotes">
<h2><a class="toc-backref" href="#references-and-footnotes">References and Footnotes</a></h2>
<dl class="footnote brackets">
<dt class="label" id="id8"><span class="brackets">1</span><span class='fn-backref''><em> (<a href='#id1'>1</a>, <a href='#id4'>2</a>, <a href='#id5'>3</a>, <a href='#id6'>4</a>) </em></span></dt>
<dd><a class="reference external" href="../pep-0005">PEP 5</a>, Guidelines for Language Evolution, Prescod
<a class="reference external" href="http://www.python.org/dev/peps/pep-0005/">http://www.python.org/dev/peps/pep-0005/</a></dd>
<dt class="label" id="id9"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><a class="reference external" href="../pep-0227">PEP 227</a>, Statically Nested Scopes, Hylton
<a class="reference external" href="http://www.python.org/dev/peps/pep-0227/">http://www.python.org/dev/peps/pep-0227/</a></dd>
<dt class="label" id="id10"><span class="brackets">3</span><span class='fn-backref''><em> (<a href='#id3'>1</a>, <a href='#id7'>2</a>) </em></span></dt>
<dd><a class="reference external" href="../pep-0236">PEP 236</a>, Back to the <code class="docutils literal notranslate"><span class="pre">__future__</span></code>, Peters
<a class="reference external" href="http://www.python.org/dev/peps/pep-0236/">http://www.python.org/dev/peps/pep-0236/</a></dd>
</dl>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright">Copyright</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/master/pep-0244.txt">https://github.com/python/peps/blob/master/pep-0244.txt</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/master/pep-0244.txt">2017-11-11 19:28:55 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#">PEP 244 – The <code class="docutils literal notranslate"><span class="pre">directive</span></code> statement</a><ul>
<li><a class="reference internal" href="#contents">Contents</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#semantics">Semantics</a></li>
<li><a class="reference internal" href="#specific-directives-transitional">Specific Directives: transitional</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#unresolved-problems-directive-as-the-first-identifier">Unresolved Problems:  directive as the first identifier</a></li>
<li><a class="reference internal" href="#questions-and-answers">Questions and Answers</a></li>
<li><a class="reference internal" href="#references-and-footnotes">References and Footnotes</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</li>
</ul>

            <br />
            <strong><a href="https://github.com/python/peps/blob/master/pep-0244.txt">Page Source (GitHub)</a></strong>
        </nav>
    </section>
    <script src="../_static/doctools.js"></script>
</body>
</html>