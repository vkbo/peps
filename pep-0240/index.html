
<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PEP 240 – Adding a Rational Literal to Python | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png"/>
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/mq.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <meta name="description" content="Python Enhancement Proposals (PEPs)"/>
</head>
<body>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 240 – Adding a Rational Literal to Python</li>
            </ul>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 240 – Adding a Rational Literal to Python</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">PEP</dt>
<dd class="field-odd">240</dd>
<dt class="field-even">Title</dt>
<dd class="field-even">Adding a Rational Literal to Python</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd">Christopher A. Craig &lt;python-pep&#32;&#97;t&#32;ccraig.org&gt;, Moshe Zadka &lt;moshez&#32;&#97;t&#32;zadka.site.co.il&gt;</dd>
<dt class="field-even">Status</dt>
<dd class="field-even">Rejected</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd">Standards Track</dd>
<dt class="field-even">Created</dt>
<dd class="field-even">11-Mar-2001</dd>
<dt class="field-odd">Python-Version</dt>
<dd class="field-odd">2.2</dd>
<dt class="field-even">Post-History</dt>
<dd class="field-even">16-Mar-2001</dd>
</dl>
<hr class="docutils" />
<section id="contents">
<h2>Contents</h2>
<ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#bdfl-pronouncement">BDFL Pronouncement</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#proposal">Proposal</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#common-objections">Common Objections</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract">Abstract</a></h2>
<p>A different PEP <a class="footnote-reference brackets" href="#id3" id="id1">1</a> suggests adding a builtin rational type to
Python.  This PEP suggests changing the ddd.ddd float literal to a
rational in Python, and modifying non-integer division to return
it.</p>
</section>
<section id="bdfl-pronouncement">
<h2><a class="toc-backref" href="#bdfl-pronouncement">BDFL Pronouncement</a></h2>
<p>This PEP is rejected.  The needs outlined in the rationale section
have been addressed to some extent by the acceptance of <a class="reference external" href="../pep-0327">PEP 327</a>
for decimal arithmetic.  Guido also noted, “Rational arithmetic
was the default ‘exact’ arithmetic in ABC and it did not work out as
expected”.  See the python-dev discussion on 17 June 2005 <a class="footnote-reference brackets" href="#id4" id="id2">2</a>.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale">Rationale</a></h2>
<p>Rational numbers are useful for exact and unsurprising arithmetic.
They give the correct results people have been taught in various
math classes.  Making the “obvious” non-integer type one with more
predictable semantics will surprise new programmers less than
using floating point numbers. As quite a few posts on c.l.py and
on <a class="reference external" href="mailto:tutor&#37;&#52;&#48;python&#46;org">tutor<span>&#64;</span>python<span>&#46;</span>org</a> have shown, people often get bit by strange
semantics of floating point numbers: for example, <code class="docutils literal notranslate"><span class="pre">round(0.98,</span> <span class="pre">2)</span></code>
still gives 0.97999999999999998.</p>
</section>
<section id="proposal">
<h2><a class="toc-backref" href="#proposal">Proposal</a></h2>
<p>Literals conforming to the regular expression <code class="docutils literal notranslate"><span class="pre">'\d*.\d*'</span></code> will be
rational numbers.</p>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#backwards-compatibility">Backwards Compatibility</a></h2>
<p>The only backwards compatible issue is the type of literals
mentioned above.  The following migration is suggested:</p>
<ol class="arabic simple">
<li>The next Python after approval will allow
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">rational_literals</span></code>
to cause all such literals to be treated as rational numbers.</li>
<li>Python 3.0 will have a warning, turned on by default, about
such literals in the absence of a `` __future__`` statement.  The
warning message will contain information about the <code class="docutils literal notranslate"><span class="pre">__future__</span></code>
statement, and indicate that to get floating point literals,
they should be suffixed with “e0”.</li>
<li>Python 3.1 will have the warning turned off by default.  This
warning will stay in place for 24 months, at which time the
literals will be rationals and the warning will be removed.</li>
</ol>
</section>
<section id="common-objections">
<h2><a class="toc-backref" href="#common-objections">Common Objections</a></h2>
<p>Rationals are slow and memory intensive!
(Relax, I’m not taking floats away, I’m just adding two more characters.
<code class="docutils literal notranslate"><span class="pre">1e0</span></code> will still be a float)</p>
<p>Rationals must present themselves as a decimal float or they will be
horrible for users expecting decimals (i.e. <code class="docutils literal notranslate"><span class="pre">str(.5)</span></code> should return <code class="docutils literal notranslate"><span class="pre">'.5'</span></code> and
not <code class="docutils literal notranslate"><span class="pre">'1/2'</span></code>).  This means that many rationals must be truncated at some
point, which gives us a new loss of precision.</p>
</section>
<section id="references">
<h2><a class="toc-backref" href="#references">References</a></h2>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><a class="reference external" href="../pep-0239">PEP 239</a>, Adding a Rational Type to Python, Zadka,
<a class="reference external" href="http://www.python.org/dev/peps/pep-0239/">http://www.python.org/dev/peps/pep-0239/</a></dd>
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd>Raymond Hettinger, Propose rejection of PEPs 239 and 240 – a builtin
rational type and rational literals
<a class="reference external" href="https://mail.python.org/pipermail/python-dev/2005-June/054281.html">https://mail.python.org/pipermail/python-dev/2005-June/054281.html</a></dd>
</dl>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright">Copyright</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/master/pep-0240.txt">https://github.com/python/peps/blob/master/pep-0240.txt</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/master/pep-0240.txt">2017-11-11 19:28:55 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#">PEP 240 – Adding a Rational Literal to Python</a><ul>
<li><a class="reference internal" href="#contents">Contents</a></li>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#bdfl-pronouncement">BDFL Pronouncement</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#proposal">Proposal</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#common-objections">Common Objections</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</li>
</ul>

            <br />
            <strong><a href="https://github.com/python/peps/blob/master/pep-0240.txt">Page Source (GitHub)</a></strong>
        </nav>
    </section>
    <script src="../_static/doctools.js"></script>
</body>
</html>